"use strict";(self.webpackChunkkeenchat_app=self.webpackChunkkeenchat_app||[]).push([[812],{5812:function(e,r,t){t.r(r),t.d(r,{HfInference:function(){return Z},TextGenerationStreamFinishReason:function(){return g}});var n=t(7762),a=t(5987),u=t(1413),o=t(4165),s=t(5861),i=t(5671),c=t(3144),f=t(4942);function p(e,r){this.v=e,this.k=r}function y(e){var r,t;function n(r,t){try{var u=e[r](t),o=u.value,s=o instanceof p;Promise.resolve(s?o.v:o).then((function(t){if(s){var i="return"===r?"return":"next";if(!o.k||t.done)return n(i,t);t=e[i](t).value}a(u.done?"return":"normal",t)}),(function(e){n("throw",e)}))}catch(i){a("throw",i)}}function a(e,a){switch(e){case"return":r.resolve({value:a,done:!0});break;case"throw":r.reject(a);break;default:r.resolve({value:a,done:!1})}(r=r.next)?n(r.key,r.arg):t=null}this._invoke=function(e,a){return new Promise((function(u,o){var s={key:e,arg:a,resolve:u,reject:o,next:null};t?t=t.next=s:(r=t=s,n(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function l(e){return function(){return new y(e.apply(this,arguments))}}function v(e){return new p(e,0)}function b(e){var r={},t=!1;function n(r,n){return t=!0,{done:!1,value:new p(n=new Promise((function(t){t(e[r](n))})),1)}}return r["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},r.next=function(e){return t?(t=!1,e):n("next",e)},"function"==typeof e.throw&&(r.throw=function(e){if(t)throw t=!1,e;return n("throw",e)}),"function"==typeof e.return&&(r.return=function(e){return t?(t=!1,e):n("return",e)}),r}function h(e){var r,t,n,a=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&null!=(r=e[t]))return r.call(e);if(n&&null!=(r=e[n]))return new d(r.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function d(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return d=function(e){this.s=e,this.n=e.next},d.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new d(e)}y.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},y.prototype.next=function(e){return this._invoke("next",e)},y.prototype.throw=function(e){return this._invoke("throw",e)},y.prototype.return=function(e){return this._invoke("return",e)};var m=["model"];function w(e){return Array.isArray(e)?e:[e]}function x(e){var r,t,n,a=!1;return function(u){void 0===r?(r=u,t=0,n=-1):r=function(e,r){var t=new Uint8Array(e.length+r.length);return t.set(e),t.set(r,e.length),t}(r,u);for(var o=r.length,s=0;t<o;){a&&(10===r[t]&&(s=++t),a=!1);for(var i=-1;t<o&&-1===i;++t)switch(r[t]){case 58:-1===n&&(n=t-s);break;case 13:a=!0;case 10:i=t}if(-1===i)break;e(r.subarray(s,i),n),s=t,n=-1}s===o?r=void 0:0!==s&&(r=r.subarray(s),t-=s)}}function k(e,r,t){var n={data:"",event:"",id:"",retry:void 0},a=new TextDecoder;return function(u,o){if(0===u.length)null===t||void 0===t||t(n),n={data:"",event:"",id:"",retry:void 0};else if(o>0){var s=a.decode(u.subarray(0,o)),i=o+(32===u[o+1]?2:1),c=a.decode(u.subarray(i));switch(s){case"data":n.data=n.data?n.data+"\n"+c:c;break;case"event":n.event=c;break;case"id":e(n.id=c);break;case"retry":var f=parseInt(c,10);isNaN(f)||r(n.retry=f)}}}}var g=function(e){return e.Length="length",e.EndOfSequenceToken="eos_token",e.StopSequence="stop_sequence",e}(g||{}),Z=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.Z)(this,e),(0,f.Z)(this,"apiKey",void 0),(0,f.Z)(this,"defaultOptions",void 0),this.apiKey=r,this.defaultOptions=t}return(0,c.Z)(e,[{key:"fillMask",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:if(n=e.sent,Array.isArray(n)&&n.every((function(e){return"number"===typeof e.score&&"string"===typeof e.sequence&&"number"===typeof e.token&&"string"===typeof e.token_str}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type Array<score: number, sequence:string, token:number, token_str:string>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"summarization",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:if(n=e.sent,Array.isArray(n)&&n.every((function(e){return"string"===typeof e.summary_text}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type Array<summary_text: string>");case 6:return e.abrupt("return",null===n||void 0===n?void 0:n[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"questionAnswer",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:if(n=e.sent,"string"===typeof n.answer&&"number"===typeof n.end&&"number"===typeof n.score&&"number"===typeof n.start){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type <answer: string, end: number, score: number, start: number>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"tableQuestionAnswer",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:if(n=e.sent,"string"===typeof n.aggregator&&"string"===typeof n.answer&&Array.isArray(n.cells)&&n.cells.every((function(e){return"string"===typeof e}))&&Array.isArray(n.coordinates)&&n.coordinates.every((function(e){return Array.isArray(e)&&e.every((function(e){return"number"===typeof e}))}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type <aggregator: string, answer: string, cells: string[], coordinates: number[][]>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"textClassification",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===n;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=n[0];case 11:if(a=e.t2,Array.isArray(a)&&a.every((function(e){return"string"===typeof e.label&&"number"===typeof e.score}))){e.next=15;break}throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"textGeneration",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:if(n=e.sent,Array.isArray(n)&&n.every((function(e){return"string"===typeof e.generated_text}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type Array<generated_text: string>");case 6:return e.abrupt("return",null===n||void 0===n?void 0:n[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"textGenerationStream",value:function(e,r){var t=this;return l((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(b(h(t.streamingRequest(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"tokenClassification",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=w,e.next=3,this.request(r,t);case 3:if(e.t1=e.sent,n=(0,e.t0)(e.t1),Array.isArray(n)&&n.every((function(e){return"number"===typeof e.end&&"string"===typeof e.entity_group&&"number"===typeof e.score&&"number"===typeof e.start&&"string"===typeof e.word}))){e.next=8;break}throw new TypeError("Invalid inference output: output must be of type Array<end: number, entity_group: string, score: number, start: number, word: string>");case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"translation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:if(n=e.sent,Array.isArray(n)&&n.every((function(e){return"string"===typeof e.translation_text}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type Array<translation_text: string>");case 6:return e.abrupt("return",null===n||void 0===n?void 0:n[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"zeroShotClassification",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=w,e.next=3,this.request(r,t);case 3:if(e.t1=e.sent,n=(0,e.t0)(e.t1),Array.isArray(n)&&n.every((function(e){return Array.isArray(e.labels)&&e.labels.every((function(e){return"string"===typeof e}))&&Array.isArray(e.scores)&&e.scores.every((function(e){return"number"===typeof e}))&&"string"===typeof e.sequence}))){e.next=8;break}throw new TypeError("Invalid inference output: output must be of type Array<labels: string[], scores: number[], sequence: string>");case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"conversational",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:if(n=e.sent,Array.isArray(n.conversation.generated_responses)&&n.conversation.generated_responses.every((function(e){return"string"===typeof e}))&&Array.isArray(n.conversation.past_user_inputs)&&n.conversation.past_user_inputs.every((function(e){return"string"===typeof e}))&&"string"===typeof n.generated_text&&Array.isArray(n.warnings)&&n.warnings.every((function(e){return"string"===typeof e}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type <conversation: {generated_responses: string[], past_user_inputs: string[]}, generated_text: string, warnings: string[]>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"featureExtraction",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"automaticSpeechRecognition",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,(0,u.Z)((0,u.Z)({},t),{},{binary:!0}));case 2:if(n=e.sent,"string"===typeof n.text){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type <text: string>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"audioClassification",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,(0,u.Z)((0,u.Z)({},t),{},{binary:!0}));case 2:if(n=e.sent,Array.isArray(n)&&n.every((function(e){return"string"===typeof e.label&&"number"===typeof e.score}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"imageClassification",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,(0,u.Z)((0,u.Z)({},t),{},{binary:!0}));case 2:if(n=e.sent,Array.isArray(n)&&n.every((function(e){return"string"===typeof e.label&&"number"===typeof e.score}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"objectDetection",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,(0,u.Z)((0,u.Z)({},t),{},{binary:!0}));case 2:if(n=e.sent,Array.isArray(n)&&n.every((function(e){return"string"===typeof e.label&&"number"===typeof e.score&&"number"===typeof e.box.xmin&&"number"===typeof e.box.ymin&&"number"===typeof e.box.xmax&&"number"===typeof e.box.ymax}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"imageSegmentation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,(0,u.Z)((0,u.Z)({},t),{},{binary:!0}));case 2:if(n=e.sent,Array.isArray(n)&&n.every((function(e){return"string"===typeof e.label&&"string"===typeof e.mask&&"number"===typeof e.score}))){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type Array<label: string, mask: string, score: number>");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"textToImage",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,(0,u.Z)((0,u.Z)({},t),{},{blob:!0}));case 2:if(n=e.sent,n&&n instanceof Blob){e.next=6;break}throw new TypeError("Invalid inference output: output must be of type object & of instance Blob");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"imageToText",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(r,(0,u.Z)((0,u.Z)({},t),{},{binary:!0}));case 2:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===n;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=n[0];case 11:return e.abrupt("return",e.t2);case 12:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"makeRequestOptions",value:function(e,r){var t=(0,u.Z)((0,u.Z)({},this.defaultOptions),r),n=e.model,o=(0,a.Z)(e,m),s={};return this.apiKey&&(s.Authorization="Bearer ".concat(this.apiKey)),null!==r&&void 0!==r&&r.binary||(s["Content-Type"]="application/json"),null!==r&&void 0!==r&&r.binary&&(t.wait_for_model&&(s["X-Wait-For-Model"]="true"),!1===t.use_cache&&(s["X-Use-Cache"]="false"),t.dont_load_model&&(s["X-Load-Model"]="0")),{url:"".concat("https://api-inference.huggingface.co/models/").concat(n),info:{headers:s,method:"POST",body:null!==r&&void 0!==r&&r.binary?e.data:JSON.stringify((0,u.Z)((0,u.Z)({},o),{},{options:t})),credentials:null!==r&&void 0!==r&&r.includeCredentials?"include":"same-origin"},mergedOptions:t}}},{key:"request",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r,t){var n,a,s,i,c,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.makeRequestOptions(r,t),a=n.url,s=n.info,i=n.mergedOptions,e.next=3,fetch(a,s);case 3:if(c=e.sent,!1===i.retry_on_error||503!==c.status||i.wait_for_model){e.next=6;break}return e.abrupt("return",this.request(r,(0,u.Z)((0,u.Z)({},i),{},{wait_for_model:!0})));case 6:if(null===t||void 0===t||!t.blob){e.next=12;break}if(c.ok){e.next=9;break}throw new Error("An error occurred while fetching the blob");case 9:return e.next=11,c.blob();case 11:return e.abrupt("return",e.sent);case 12:return e.next=14,c.json();case 14:if(!(f=e.sent).error){e.next=17;break}throw new Error(f.error);case 17:return e.abrupt("return",f);case 18:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"streamingRequest",value:function(e,r){var t=this;return l((0,o.Z)().mark((function a(){var s,i,c,f,p,y,l,b,h,d,m,w,g,Z,A,_,q;return(0,o.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.makeRequestOptions((0,u.Z)((0,u.Z)({},e),{},{stream:!0}),r),i=s.url,c=s.info,f=s.mergedOptions,a.next=3,v(fetch(i,c));case 3:if(p=a.sent,!1===f.retry_on_error||503!==p.status||f.wait_for_model){a.next=6;break}return a.abrupt("return",t.streamingRequest(e,(0,u.Z)((0,u.Z)({},f),{},{wait_for_model:!0})));case 6:if(p.ok){a.next=14;break}if(null===(y=p.headers.get("Content-Type"))||void 0===y||!y.startsWith("application/json")){a.next=13;break}return a.next=10,v(p.json());case 10:if(!(l=a.sent).error){a.next=13;break}throw new Error(l.error);case 13:throw new Error("Server response contains error: ".concat(p.status));case 14:if("text/event-stream"===p.headers.get("content-type")){a.next=16;break}throw new Error("Server does not support event stream content type, it returned "+p.headers.get("content-type"));case 16:if(p.body){a.next=18;break}return a.abrupt("return");case 18:b=p.body.getReader(),h=[],d=function(e){h.push(e)},m=x(k((function(){}),(function(){}),d)),a.prev=22;case 23:return a.next=26,v(b.read());case 26:if(w=a.sent,g=w.done,Z=w.value,!g){a.next=31;break}return a.abrupt("return");case 31:m(Z),A=(0,n.Z)(h),a.prev=33,A.s();case 35:if((_=A.n()).done){a.next=42;break}if(!((q=_.value).data.length>0)){a.next=40;break}return a.next=40,JSON.parse(q.data);case 40:a.next=35;break;case 42:a.next=47;break;case 44:a.prev=44,a.t0=a.catch(33),A.e(a.t0);case 47:return a.prev=47,A.f(),a.finish(47);case 50:h=[],a.next=23;break;case 53:return a.prev=53,b.releaseLock(),a.finish(53);case 56:case"end":return a.stop()}}),a,null,[[22,,53,56],[33,44,47,50]])})))()}}]),e}()}}]);
//# sourceMappingURL=812.ea8e6e86.chunk.js.map